<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>dplyr</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.8/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="styles_xa.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, title-slide

# dplyr
## A package tailed towards the manipulation of data frames
### 

---




---

# dyplyr

- [`dplyr`](https://dplyr.tidyverse.org/) is a package tailed towards data manipulation.

--

- `filter()` picks cases based on their values.

--

- `select()` picks variables based on their names.

--

- `mutate()` adds new variables that are functions of existing variables

--

- `summarise()` reduces multiple values down to a single summary.

--

- `group_by()` allows to perform any operation by grouping variables.

--

- `arrange()` changes the ordering of the rows.

---

# `filter()` picks cases based on their values

`filter(.data, ...)` 


```r
# Without %&gt;%:
filter(mtcars, disp &gt; 350 &amp; mpg &lt; 11)

# with %&gt;%
mtcars %&gt;%
  filter(disp &gt; 350 &amp; mpg &lt; 11)
```

Note: You don't have to provide the name of a data object within the dplyr function!

***not***: `filter(mtcars, mtcars$disp &gt; 350 &amp; mtcars$mpg &lt; 11)`

***but***: `filter(mtcars, disp &gt; 350 &amp; mpg &lt; 11)`

---

# Task

- Take the `uwezo` database. `uwezo &lt;- readRDS("uwezo_2015_clean.rds")`
- Filter all cases from the district `Abim` where the gender of the interviewed person is `Male` (Hint: variables `id_districtName` and `hh_gender`)



---


```r
library(tidyverse)
uwezo %&gt;% 
  filter(id_districtName == "Abim" &amp; hh_gender == "Male")
```

```
## # A tibble: 551 x 156
##    id_database id_district id_districtName id_hh   id_regionName id_village
##    &lt;dic&gt;       &lt;dic&gt;       &lt;dic&gt;           &lt;dic&gt;   &lt;dic&gt;         &lt;dic&gt;     
##  1 UG15        314         Abim            2071001 North         2071      
##  2 UG15        314         Abim            2071002 North         2071      
##  3 UG15        314         Abim            2071002 North         2071      
##  4 UG15        314         Abim            2071004 North         2071      
##  5 UG15        314         Abim            2071014 North         2071      
##  6 UG15        314         Abim            2071015 North         2071      
##  7 UG15        314         Abim            2071015 North         2071      
##  8 UG15        314         Abim            2071015 North         2071      
##  9 UG15        314         Abim            2071015 North         2071      
## 10 UG15        314         Abim            2071015 North         2071      
## # … with 541 more rows, and 150 more variables: county_code1 &lt;dic&gt;,
## #   county &lt;dic&gt;, parishcode &lt;dic&gt;, subcounty_code &lt;dic&gt;, subcounty_name &lt;dic&gt;,
## #   parish_name &lt;dic&gt;, locationcode &lt;dic&gt;, location &lt;dic&gt;, ea_code &lt;dic&gt;,
## #   eacode &lt;dic&gt;, village_estate &lt;dic&gt;, urban_code &lt;dic&gt;, no_of_hhs &lt;dic&gt;,
## #   males &lt;dic&gt;, females &lt;dic&gt;, sample_no &lt;dic&gt;, ea_code1 &lt;dic&gt;,
## #   validationcode &lt;dic&gt;, date &lt;dic&gt;, hhno &lt;dic&gt;, answering_person &lt;dic&gt;,
## #   hh_gender &lt;dic&gt;, hh_age &lt;dic&gt;, hh_edu_raw &lt;fct&gt;, household_visited &lt;dic&gt;,
## #   whichyear &lt;dic&gt;, home_language &lt;dic&gt;, hh_size &lt;dic&gt;, hh_males &lt;dic&gt;,
## #   hh_females &lt;dic&gt;, house_wall &lt;dic&gt;, house_lighting &lt;dic&gt;,
## #   asset_toilet &lt;dic&gt;, mealsPerDay &lt;dic&gt;, eat_veg &lt;dic&gt;, eat_fruit &lt;dic&gt;,
## #   drink_milk &lt;dic&gt;, asset_tv &lt;dic&gt;, asset_radio &lt;dic&gt;, asset_computer &lt;dic&gt;,
## #   asset_phone &lt;dic&gt;, asset_car &lt;dic&gt;, asset_motorbike &lt;dic&gt;,
## #   asset_bicycle &lt;dic&gt;, asset_cattle &lt;dic&gt;, asset_sheep_goat &lt;dic&gt;,
## #   h107_donkey &lt;dic&gt;, h107_camel &lt;dic&gt;, h107_pig &lt;dic&gt;, h107other &lt;dic&gt;,
## #   water_source &lt;dic&gt;, water_source_distance &lt;dic&gt;, treat_water &lt;dic&gt;,
## #   h201_1 &lt;dic&gt;, h201_2 &lt;dic&gt;, h201_3 &lt;dic&gt;, h201_4 &lt;dic&gt;, h201_5 &lt;dic&gt;,
## #   h201_6 &lt;dic&gt;, h201_7 &lt;dic&gt;, h201_8other &lt;dic&gt;, h301a_1 &lt;dic&gt;,
## #   h301a_2 &lt;dic&gt;, h301b_1 &lt;dic&gt;, h301b_2 &lt;dic&gt;, h301c_1 &lt;dic&gt;, h301c_2 &lt;dic&gt;,
## #   h301d_1 &lt;dic&gt;, h301d_2 &lt;dic&gt;, h301e_1 &lt;dic&gt;, h301e_2 &lt;dic&gt;, h301f_1 &lt;dic&gt;,
## #   h301f_2 &lt;dic&gt;, h301g_1 &lt;dic&gt;, h301g_2 &lt;dic&gt;, h301other &lt;dic&gt;, h302a &lt;dic&gt;,
## #   h302b &lt;dic&gt;, h302c &lt;dic&gt;, h302d &lt;dic&gt;, h302e &lt;dic&gt;, h303 &lt;dic&gt;, h304 &lt;dic&gt;,
## #   h305 &lt;dic&gt;, h306 &lt;dic&gt;, h307 &lt;dic&gt;, h308 &lt;dic&gt;, h308other &lt;dic&gt;,
## #   h1600 &lt;dic&gt;, h1700 &lt;dic&gt;, childNo &lt;dic&gt;, age &lt;dic&gt;, gender &lt;dic&gt;,
## #   biological_parents &lt;dic&gt;, h600 &lt;dic&gt;, disability &lt;dic&gt;,
## #   mothers_toschool &lt;dic&gt;, preschool &lt;dic&gt;, schooltype &lt;dic&gt;, tuition &lt;dic&gt;, …
```

---

# `select()` picks variables based on their names

`select(.data, ...)` 


```r
# Either column numbers or column names
mtcars %&gt;% select(1, 3, carb)
# Use the `:` symbol for ranges
mtcars %&gt;% select(1:3, am:carb)
# use `-` to drop variables and keep the others
mtcars %&gt;% select(-am, -(1:3), -(disp:drat))
```

`starts_with()` and `ends_with()` can be used to select variables by parts of their names:


```r
mtcars %&gt;% select(starts_with("d"))
mtcars %&gt;% select(-ends_with("b"))
```

---

# Task

- Take the `uwezo` database.
- Filter for `Male` interviewed person and select the variables `answering_person, hh_age, and hh_edu_raw` (Hint: variable `species`)



---


```r
uwezo %&gt;% 
  filter(hh_gender == "Male") %&gt;% 
  select(answering_person, hh_age, hh_edu_raw)
```

```
## # A tibble: 62,136 x 3
##    answering_person hh_age hh_edu_raw
##    &lt;dic&gt;            &lt;dic&gt;  &lt;fct&gt;     
##  1 HH head          46     Primary   
##  2 HH head          46     Primary   
##  3 HH head          46     Primary   
##  4 HH head          46     Primary   
##  5 HH head          46     Primary   
##  6 HH head          46     Primary   
##  7 HH head          81     Primary   
##  8 HH head          79     Primary   
##  9 HH head          49     Primary   
## 10 HH head          49     Primary   
## # … with 62,126 more rows
```

---

# relocate() changes the column order

The `relocate()` function helps to rearrange the columns of a data frame 


```r
starwars %&gt;% 
  relocate(name, birth_year, sex)
```

```
## # A tibble: 87 x 14
##    name    birth_year sex    height  mass hair_color skin_color eye_color gender
##    &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; 
##  1 Luke S…       19   male      172    77 blond      fair       blue      mascu…
##  2 C-3PO        112   none      167    75 &lt;NA&gt;       gold       yellow    mascu…
##  3 R2-D2         33   none       96    32 &lt;NA&gt;       white, bl… red       mascu…
##  4 Darth …       41.9 male      202   136 none       white      yellow    mascu…
##  5 Leia O…       19   female    150    49 brown      light      brown     femin…
##  6 Owen L…       52   male      178   120 brown, gr… light      blue      mascu…
##  7 Beru W…       47   female    165    75 brown      light      blue      femin…
##  8 R5-D4         NA   none       97    32 &lt;NA&gt;       white, red red       mascu…
##  9 Biggs …       24   male      183    84 black      light      brown     mascu…
## 10 Obi-Wa…       57   male      182    77 auburn, w… fair       blue-gray mascu…
## # … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
## #   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;
```

---

# `mutate()` adds new variables that are functions of existing variables

`mutate(.data, ...)`


```r
mtcars %&gt;%
  mutate(
    efficiency = mpg / disp,
    effect = round(hp / mpg * 100)
  )
```

```
##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
##                     efficiency effect
## Mazda RX4           0.13125000    524
## Mazda RX4 Wag       0.13125000    524
## Datsun 710          0.21111111    408
## Hornet 4 Drive      0.08294574    514
## Hornet Sportabout   0.05194444    936
## Valiant             0.08044444    580
## Duster 360          0.03972222   1713
## Merc 240D           0.16632584    254
## Merc 230            0.16193182    417
## Merc 280            0.11455847    641
## Merc 280C           0.10620525    691
## Merc 450SE          0.05946338   1098
## Merc 450SL          0.06272661   1040
## Merc 450SLC         0.05511240   1184
## Cadillac Fleetwood  0.02203390   1971
## Lincoln Continental 0.02260870   2067
## Chrysler Imperial   0.03340909   1565
## Fiat 128            0.41168996    204
## Honda Civic         0.40158520    171
## Toyota Corolla      0.47679325    192
## Toyota Corona       0.17901749    451
## Dodge Challenger    0.04874214    968
## AMC Javelin         0.05000000    987
## Camaro Z28          0.03800000   1842
## Pontiac Firebird    0.04800000    911
## Fiat X1-9           0.34556962    242
## Porsche 914-2       0.21612635    350
## Lotus Europa        0.31966351    372
## Ford Pantera L      0.04501425   1671
## Ferrari Dino        0.13586207    888
## Maserati Bora       0.04983389   2233
## Volvo 142E          0.17685950    509
```

---

# Task

- Take the `uwezo` database.
- Create a new variable `age_median_split` for age of the interviewed person (median split; TRUE is upper half and FALSE = lower half)
- Filter all cases from the lower half
- Select `hh_size, house_wall`



---


```r
uwezo %&gt;%
  mutate(age_median_split = hh_age &gt;= median(hh_age, na.rm = TRUE)) %&gt;%
  filter(age_median_split == FALSE) %&gt;%
  select(hh_size, house_wall)
```

```
## # A tibble: 70,666 x 2
##    hh_size house_wall  
##    &lt;dic&gt;   &lt;dic&gt;       
##  1 3       Stone/Bricks
##  2 3       Timber      
##  3 7       Stone/Bricks
##  4 7       Stone/Bricks
##  5 7       Stone/Bricks
##  6 7       Stone/Bricks
##  7 7       Stone/Bricks
##  8 5       Stone/Bricks
##  9 5       Stone/Bricks
## 10 5       Stone/Bricks
## # … with 70,656 more rows
```

---

# `summarise()` reduces multiple values down to a single summary.


```r
mtcars %&gt;%
  summarise(
    mean_mpg = mean(mpg),
    sd_mpg = sd(mpg),
    n = n()
  )
```

```
##   mean_mpg   sd_mpg  n
## 1 20.09062 6.026948 32
```

---

# Task

- Take the `uwezo` database.
- Filter district `Abim`
- Calculate the mean and sd for hh_females and hh_males (Note: don't forget to remove NA values: `na.rm = TRUE`)



---


```r
uwezo %&gt;%
  filter(id_districtName == "Abim") %&gt;%
  summarise(
    mean_female = mean(hh_females, na.rm = TRUE),
    sd_female = sd(hh_females, na.rm = TRUE),
    mean_male = mean(hh_males, na.rm = TRUE),
    sd_male = sd(hh_males, na.rm = TRUE),
  )
```

```
## # A tibble: 1 x 4
##   mean_female sd_female mean_male sd_male
##         &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1        3.64      2.19      3.42    2.27
```

---

# `group_by()` allows to perform any operation by grouping variables.


```r
mtcars %&gt;% group_by(cyl) %&gt;%
  summarise(
    mean_mpg = mean(mpg),
    sd_mpg = sd(mpg),
    n = n()
  )
```

```
## # A tibble: 3 x 4
##     cyl mean_mpg sd_mpg     n
##   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1     4     26.7   4.51    11
## 2     6     19.7   1.45     7
## 3     8     15.1   2.56    14
```

---


```r
mtcars %&gt;% group_by(cyl, am) %&gt;%
  summarise(
    mean_mpg = mean(mpg),
    sd_mpg = sd(mpg),
    n = n()
  )
```

```
## # A tibble: 6 x 5
## # Groups:   cyl [3]
##     cyl    am mean_mpg sd_mpg     n
##   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1     4     0     22.9  1.45      3
## 2     4     1     28.1  4.48      8
## 3     6     0     19.1  1.63      4
## 4     6     1     20.6  0.751     3
## 5     8     0     15.0  2.77     12
## 6     8     1     15.4  0.566     2
```

---

# Task

- Take the `uwezo` database.
- Group by district
- Calculate the mean of hh_size
- And the number of cases per group (Hint: `n()`)



---


```r
uwezo %&gt;%
  group_by(id_districtName) %&gt;%
  summarise(
    size = mean(hh_size, na.rm = TRUE),
    n = n()
  )
```

```
## # A tibble: 112 x 3
##    id_districtName  size     n
##    &lt;dic&gt;           &lt;dbl&gt; &lt;int&gt;
##  1 Abim             7.29  1537
##  2 Adjumani         7.27  1557
##  3 Agago            7.18  1849
##  4 Alebtong         6.79  1502
##  5 Amolatar         7.67  1531
##  6 Amudat           6.78  1830
##  7 Amuria           7.70  1445
##  8 Amuru            7.64  1623
##  9 Apac             6.82  1373
## 10 Arua             8.24  1427
## # … with 102 more rows
```

---

# `arrange()` changes the ordering of the rows

`arrange(.data, ...)`


```r
dat &lt;- data.frame(age = c(5,5,6,7,6), sen = c(0, 1, 1, 0, 0), points = c(34, 55, 22, 11, 9))
dat %&gt;%
  arrange(sen, age) 
```

```
##   age sen points
## 1   5   0     34
## 2   6   0      9
## 3   7   0     11
## 4   5   1     55
## 5   6   1     22
```

---

# `desc()` specifies a variable to be arranged descending


```r
dat %&gt;%
  arrange(sen, desc(points))
```

```
##   age sen points
## 1   5   0     34
## 2   7   0     11
## 3   6   0      9
## 4   5   1     55
## 5   6   1     22
```

---

# Task

- Take the `starwars` database.
- Calculate the bmi.
- Summarize the median of the bmi grouped by species.
- round the bmi to one decimal.
- Also calculate the `n` for each group.
- Only show cases with `n &gt; 2`.
- Arrange the resulting table. Sort by `n` in descending order.



---


```r
starwars %&gt;% 
  mutate(bmi = mass / (height / 100)^2) %&gt;% 
  group_by(species) %&gt;% 
  summarise(
    mean_bmi = median(bmi, na.rm = TRUE) %&gt;% round(1), 
    n = n()
  ) %&gt;%
  filter(n &gt;2) %&gt;%
  arrange(desc(n))
```

```
## # A tibble: 4 x 3
##   species mean_bmi     n
##   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;
## 1 Human       24.8    35
## 2 Droid       34.4     6
## 3 &lt;NA&gt;        15.1     4
## 4 Gungan      16.8     3
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:10"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
