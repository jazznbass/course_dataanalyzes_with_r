{
  "hash": "da3fb21c66179540284fc2281198b207",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R Basic Concepts: <br>Sophisticated subsetting\"\ncompany: \"University of Potsdam\"\nauthor: \"JÃ¼rgen Wilbert\"\ndate: \"Version: 15 May 2025\"\noutput:\n  ioslides_presentation: \n    css: styles.css\n    widescreen: yes\n    logo: img/ZEIF.png\n    df_print: kable\n---\n\n\n\n\n\n# Sophisticated selections\n\n## Relational operators {.build}\n\nRelational operators compare two values and return a logical value (`TRUE` or `FALSE`)\n\n|Operator|Relation|Example|\n|----|----------------|--------|\n|`==`|is identical|x == y|\n|`!=`|is not identical|x != y|\n|`>`|is greater|x > y|\n|`>=`|is greater or identical|x >= y|  \n|`<`|is less|x < y|\n|`<=`|is less or identical|x <=  y|  \n\n## Examples {.build}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n7 > 2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\n7 <=  10\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\n5 == 4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\n5 != 6\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n\n## Relational vectors and characters\n\nOnly `==` and `!=` can be applied to non numerical objects:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\"Hamster\" == \"Mouse\"\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\n\"Hamster\" != \"Mouse\"\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n\n## Relational operators and vectors {.smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage <- c(12, 4, 3, 8, 4, 2, 1)\nage < 5\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE\n```\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| age|age < 5 |\n|---:|:-------|\n|  12|FALSE   |\n|   4|TRUE    |\n|   3|TRUE    |\n|   8|FALSE   |\n|   4|TRUE    |\n|   2|TRUE    |\n|   1|TRUE    |\n\n</div>\n:::\n:::\n\n\n\n## Using logical vectors to select values\n\nWhen you put a logical vector within square brackets `[ ]` after an object, all elements of that object with a `TRUE` in the logical vector are selected:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage <- c(12, 4, 3, 8)\nx <- age > 5\nx\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE FALSE  TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nage[x]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 12  8\n```\n\n\n:::\n:::\n\n\n\n## Using logical vectors to select values\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage <- c(12, 4, 3, 8)\nx <- age > 5\nage[x]\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| age|x <- age > 5 |Select?    |Result |\n|---:|:------------|:----------|:------|\n|  12|TRUE         |**select** |12     |\n|   4|FALSE        |drop       |       |\n|   3|FALSE        |drop       |       |\n|   8|TRUE         |**select** |8      |\n\n</div>\n:::\n:::\n\n\n\n## Task {.build}\n\nCreate a new vector `friends <- c(4, 5, 6, 3, 7, 2, 3)`.  \nShow all values of that vector `>= 4`.\n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n\n## Task - solution \n\nCreate a new vector `friends <- c(4, 5, 6, 3, 7, 2, 3)`.  \nShow all values of that vector `>= 4`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfriends <- c(4, 5, 6, 3, 7, 2, 3)\nfriends[friends >= 4]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4 5 6 7\n```\n\n\n:::\n:::\n\n\n\n\n## which() {.build}\n\nThe `which()` functions gives the **indices** of the elements that are `TRUE`.  \nIt takes a *logical vector* as an *argument*.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- c(TRUE, FALSE, FALSE, TRUE)\nwhich(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 4\n```\n\n\n:::\n:::\n\n\n\n`which()` can handle missing values:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- c(TRUE, FALSE, NA, FALSE, TRUE, NA)\nwhich(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 5\n```\n\n\n:::\n:::\n\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage <- c(12, 4, 3, 8)\nx <- age < 5\nx\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE  TRUE  TRUE FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\nwhich(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2 3\n```\n\n\n:::\n:::\n\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage <- c(12, 4, 3, 8)\nx <- age < 5\nx\nwhich(x)\nage[which(x)]\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| Index| age|x <- age < 5 |which(x) |age[which(x)] |\n|-----:|---:|:------------|:--------|:-------------|\n|     1|  12|FALSE        |         |              |\n|     2|   4|TRUE         |2        |4             |\n|     3|   3|TRUE         |3        |3             |\n|     4|   8|FALSE        |         |              |\n\n</div>\n:::\n:::\n\n\n\n\n## Why use which? {.build .smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage = c(NA, 12, 4, 3, NA, 8, 7, 4, 3, 6, 4, 3)\nx <- age < 6\nx\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1]    NA FALSE  TRUE  TRUE    NA FALSE FALSE  TRUE  TRUE FALSE  TRUE  TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nage[x]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] NA  4  3 NA  4  3  4  3\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(age[x])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] NA\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(age[which(x)])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3.5\n```\n\n\n:::\n:::\n\n\n\n## Task {.build}\n\nCreate a vector `x <- c(1, 4, 5, 3, 4, 5)` and identify:  \n1. Which elements are larger or equal than three?     \n2. Create a new vector from `x` containing all elements that are **not** four. Note: Use the `which()` function for this task.\n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n\n## Task - solution\n\nCreate a vector `x <- c(1, 4, 5, 3, 4, 5)` and identify:  \n1. Which elements are larger or equal than three?     \n2. Create a new vector from `x` containing all elements that are **not** four. Note: Use the `which()` function for this task.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- c(1, 4, 5, 3, 4, 5)\nwhich(x >= 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2 3 4 5 6\n```\n\n\n:::\n\n```{.r .cell-code}\ny <- x[which(x != 4)]\ny\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 5 3 5\n```\n\n\n:::\n:::\n\n\n\n## Selecting cases with logical vectors {.build}\n\nLogical vectors can also be appplied to *data frames* for selecting cases.\n\nLet us take an example data frame:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstudy <- data.frame(\n  sen    = c(0, 1, 0, 1, 0, 1),\n  gender = c(\"M\", \"M\", \"F\", \"M\", \"F\", \"F\"),\n  age    = c(12, 13, 11, 10, 11, 14),\n  IQ     = c(90, 85, 90, 87, 99, 89)\n)\n```\n:::\n\n\n\n---\n\nSelect with bracket subsetting or the `which()` function:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstudy_no_sen <- study[study[[\"sen\"]] == 0, ]\nstudy_no_sen\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|   | sen|gender | age| IQ|\n|:--|---:|:------|---:|--:|\n|1  |   0|M      |  12| 90|\n|3  |   0|F      |  11| 90|\n|5  |   0|F      |  11| 99|\n\n</div>\n:::\n\n```{.r .cell-code}\n# Or using the which() function\nfilter <- which(study[[\"sen\"]] == 0)\nstudy_no_sen <- study[filter, ]\n```\n:::\n\n\n\n## Task {.build}\n\nCalculate the `mean` of `IQ` for students with and without sen.\n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n\n## Task - solution\n\nCalculate the `mean` of `IQ` for students with and without sen.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter <- which(study[[\"sen\"]] == 0)\nmean(study[[\"IQ\"]][filter])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 93\n```\n\n\n:::\n\n```{.r .cell-code}\nfilter <- which(study[[\"sen\"]] == 1)\nmean(study[[\"IQ\"]][filter])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 87\n```\n\n\n:::\n:::\n\n\n\n## Logical Operations\n\nLogical operations are applied to logical values. \n\n|Operator| Operation|Example|Results|\n|--------|----------|-------|-------|\n|`!`|Not|`! x`|`TRUE when x = FALSE and FALSE when x = TRUE`|\n|`&`|AND|`x & y`|`TRUE when x and y are TRUE else FALSE`|\n|`|`|OR|`x | y`|`TRUE when x or y is TRUE else FALSE`|\n\n<br>\n<div class=\"emphasized\">\nNote: To get the | sign:  \nOn a german Mac keyboard press: option + 7  \nOn a german Windows keyboard press: AltGr + <  \n</div>\n\n## Example {.build .smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- TRUE\ny <- FALSE\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n!x\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\n!y\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nx & y\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\nx | y\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n:::\n\n\n\n## Logical Operator with vectors {.build .smaller}\n\nWhen applied to vectors, logical operations result in a new vector.  \nOperations are applied to each element one by one.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- c(TRUE, FALSE, TRUE,  FALSE)\ny <- c(TRUE, FALSE, FALSE, TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n!x\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE  TRUE FALSE  TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nx & y\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE FALSE FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\nx | y\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE  TRUE  TRUE\n```\n\n\n:::\n:::\n\n\n\n## Task {.build}\n\nCreate two vectors:\n\n`glasses <- c(TRUE, TRUE, FALSE, TRUE, FALSE)`  \n`hyperintelligent <- c(TRUE, FALSE, FALSE, TRUE, FALSE)`\n\nDetermine for each element whether `glasses` and `hyperintelligent` are TRUE at the same time.\n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n\n\n## Task - solutions\n\nCreate two vectors:\n\n`glasses <- c(TRUE, TRUE, FALSE, TRUE, FALSE)`  \n`hyperintelligent <- c(TRUE, FALSE, FALSE, TRUE, FALSE)`\n\nDetermine for each element whether `glasses` and `hyperintelligent` are TRUE at the same time.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglasses <- c(TRUE, TRUE, FALSE, TRUE, FALSE)\nhyperintelligent <- c(TRUE, FALSE, FALSE, TRUE, FALSE)\nglasses & hyperintelligent\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE FALSE  TRUE FALSE\n```\n\n\n:::\n:::\n\n\n\n---\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|glasses |hyperintelligent |glasses & hyperintelligent |\n|:-------|:----------------|:--------------------------|\n|TRUE    |TRUE             |TRUE                       |\n|TRUE    |FALSE            |FALSE                      |\n|FALSE   |FALSE            |FALSE                      |\n|TRUE    |TRUE             |TRUE                       |\n|FALSE   |FALSE            |FALSE                      |\n\n</div>\n:::\n:::\n\n\n\n## `sum()` and `mean()` with logical vectors:\n\nWhen a logical vector is applied to a numeric function (e.g. `mean()` or `sum()`), `TRUE` is counted as `1` and `FALSE` as `0`:\n\n`sum()` then gives the number of elements that are TRUE.  \n`mean()` gives the proportion of elements that are TRUE.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# e.g.:\nsum(c(TRUE, FALSE, TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(c(TRUE, FALSE, TRUE, FALSE))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.5\n```\n\n\n:::\n:::\n\n\n\n## Task\n\nTake the data from the last example and calculate the sum and proportion of cases that wear glasses and are hyperintelligent.\n\n`glasses <- c(TRUE, TRUE, FALSE, TRUE, FALSE)`  \n`hyperintelligent <- c(TRUE, FALSE, FALSE, TRUE, FALSE)`    \n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n## Task - solutions\n\nTake the data from the last example and calculate the sum and proportion of cases that wear glasses and are hyperintelligent.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsum(glasses & hyperintelligent)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n\n```{.r .cell-code}\nmean(glasses & hyperintelligent)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.4\n```\n\n\n:::\n:::\n\n\n\n## Combining logical and relational operators {.build}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage <- c(12, 4, 3, 8, 4, 2, 1, 7, 4)\ngender <- c(0, 1, 0, 1, 0, 0, 0, 0, 1)\nage > 4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\ngender == 0\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\nage > 4 & gender == 0\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE\n```\n\n\n:::\n:::\n\n\n\n## Task {.build .smaller}\n\nCreate a vector  \n`income <- c(5000, 4000, 3000, 2000, 1000)` and a vector  \n`happiness <- c(20, 35, 30, 10, 50)`.  \n\n1. Use *relational* and *logical* operations to determine for each element whether the `income` is larger than `2500` and at the same time `happiness` is above `25`.\n\n2. Calculate the proportion.\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n## Task - solution {.smaller}\n\n1. Use *relational* and *logical* operations to determine for each element whether the `income` is larger than `2500` and at the same time `happiness` is above `25`.\n\n2. Calculate the proportion.\n\n\n\n\n\n\n\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nincome <- c(5000, 4000, 3000, 2000, 1000)\nhappiness <- c(20, 35, 30, 10, 50)\nincome > 2500 & happiness > 25\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n| income| happiness|income > 2500 |happiness > 25 |income > 2500 &<br>happiness > 25 |\n|------:|---------:|:-------------|:--------------|:---------------------------------|\n|   5000|        20|TRUE          |FALSE          |FALSE                             |\n|   4000|        35|TRUE          |TRUE           |TRUE                              |\n|   3000|        30|TRUE          |TRUE           |TRUE                              |\n|   2000|        10|FALSE         |FALSE          |FALSE                             |\n|   1000|        50|FALSE         |TRUE           |FALSE                             |\n\n\n:::\n:::\n\n\n\n---\n\n... and the proportion\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(income > 2500 & happiness > 25)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.4\n```\n\n\n:::\n:::\n\n\n\n## Subsetting data frames with logical and relational operators {.build .smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstudy\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| sen|gender | age| IQ|\n|---:|:------|---:|--:|\n|   0|M      |  12| 90|\n|   1|M      |  13| 85|\n|   0|F      |  11| 90|\n|   1|M      |  10| 87|\n|   0|F      |  11| 99|\n|   1|F      |  14| 89|\n\n</div>\n:::\n:::\n\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter <- study[[\"sen\"]] == 1 & study[[\"gender\"]] == \"M\"\nstudy[filter, ]\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|   | sen|gender | age| IQ|\n|:--|---:|:------|---:|--:|\n|2  |   1|M      |  13| 85|\n|4  |   1|M      |  10| 87|\n\n</div>\n:::\n:::\n\n\n\n## Task\n\nUse the `ChickWeight` data frame for the following task.  \nThe data set is already included in R.\n\n1. Look into the data set with `?ChickWeight`.\n2. Get all variable names of the data frame with the `names()` function (`names(ChickWeight)`).\n3. Select cases from **ChickWeight** with `Diet == 1` and `Time < 16`.\n4. For these cases, calculate the correlation between `weight` and `Time`. Note: Use the `cor()` function (e.g., `cor(x, y)`)\n5. Repeat steps 3 and 4 for `Diet == 4`.\n6. What can you see?\n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter <- ChickWeight[[\"Diet\"]] ==  1 & ChickWeight[[\"Time\"]] < 16\ndiet1 <- ChickWeight[filter,]\ncor(diet1[[\"weight\"]], diet1[[\"Time\"]])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.8109772\n```\n\n\n:::\n\n```{.r .cell-code}\nfilter <- ChickWeight[[\"Diet\"]] ==  4 & ChickWeight[[\"Time\"]] < 16\ndiet4 <- ChickWeight[filter,]\ncor(diet4[[\"weight\"]], diet4[[\"Time\"]])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9720822\n```\n\n\n:::\n:::\n\n\n\nThe correlation is larger for Diet 4. This suggests that Diet 4 has a stronger impact an the chicken's weight.\n\n## The `subset()` function {smaller}\n\nR comes with a function to make subsetting a bit more straight forward.\n\n\n`subset()` has the main arguments:\n\n- `x` : A data.frame  \n- `subset` : A logical vector for filtering rows  \n- `select` : expression, indicating columns to select from a data frame\n\n\nand returns a data.frame.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsubset(study, gender == \"F\" & IQ > 89, c(sen, gender, IQ))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|   | sen|gender | IQ|\n|:--|---:|:------|--:|\n|3  |   0|F      | 90|\n|5  |   0|F      | 99|\n\n</div>\n:::\n:::\n\n\n\nVariable names must be provided without quotes and without the name of the data.frame.\n\n## Task\n\nTake the `mtcars` dataset and filter cases (here: car models) with 6 cylinders (variable `cyl`) and automatic transmission (value `1` in variable `am`).  \nSelect the variables `mpg`, `am`, `gear`, `cyl`.  \nUse the `subset` function.\n\n\n\n\n\n<div class=\"red2\">**:-)**</div>\n\n\n\n\n## Task - solutions\n\nTake the `mtcars` dataset and filter cases (here: car models) with 6 cylinders (variable `cyl`) and automatic transmission (value `1` in variable `am`).  \nSelect the variables `mpg`, `am`, `gear`, `cyl`.  \nUse the `subset` function.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsubset(mtcars, cyl == 6 & am == 1, c(mpg, am, gear, cyl))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|              |  mpg| am| gear| cyl|\n|:-------------|----:|--:|----:|---:|\n|Mazda RX4     | 21.0|  1|    4|   6|\n|Mazda RX4 Wag | 21.0|  1|    4|   6|\n|Ferrari Dino  | 19.7|  1|    5|   6|\n\n</div>\n:::\n:::\n\n\n\n\n## So many ways of subsetting ... an overview\n\nSubset a data frame (and get a new data frame)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars[mtcars[[\"cyl\"]] == 6 & mtcars[[\"am\"]] == 1, c(\"mpg\", \"am\", \"gear\", \"cyl\")]\n\nmtcars[mtcars$cyl == 6 & mtcars$am == 1, c(\"mpg\", \"am\", \"gear\", \"cyl\")]\n\nsubset(mtcars, cyl == 6 & am == 1, c(mpg, am, gear, cyl))\n\nwith(mtcars, \n  mtcars[cyl == 6 & am == 1, c(\"mpg\", \"am\", \"gear\", \"cyl\")]\n)\n```\n:::\n\n\n\n## So many ways of subsetting ... an overview\n\nExtract a variable from a data frame (and get a numeric or character vector)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars[[\"mpg\"]][mtcars[[\"cyl\"]] == 6 & mtcars[[\"am\"]] == 1]\n\nmtcars$mpg[mtcars$cyl == 6 & mtcars$am == 1]\n\nsubset(mtcars, cyl == 6 & am == 1, mpg, drop = TRUE)\n\nwith(mtcars, mpg[cyl == 6 & am == 1])\n```\n:::\n\n\n\n## Odd behaviour: {.smaller}\n\nFor base R data frames this creates a vector:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars[mtcars[[\"cyl\"]] == 6 & mtcars[[\"am\"]] == 1, \"mpg\"]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 21.0 21.0 19.7\n```\n\n\n:::\n:::\n\n\n\nThis should have resulted in a data frame with one variable but is automatically reduced to a vector.  \nAdd `drop = FALSE` to get standard behavior.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars[mtcars[[\"cyl\"]] == 6 & mtcars[[\"am\"]] == 1, \"mpg\", drop = FALSE]\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|              |  mpg|\n|:-------------|----:|\n|Mazda RX4     | 21.0|\n|Mazda RX4 Wag | 21.0|\n|Ferrari Dino  | 19.7|\n\n</div>\n:::\n:::\n\n\n\nSome modern implementations of data frames (like `tibbles`) changed this behavior.  \nTherefore, I recommend not to use it.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}